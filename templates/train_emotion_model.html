{% extends 'base.html' %} {%block content%} {% for message in
  get_flashed_messages() %}
  <div class="alert alert-warning alert-dismissible fade show" role="alert">
    <strong>Alert!</strong> {{ message }}.
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>
  
  {% endfor %}
  <form method="POST" style="text-align: center; margin-bottom: 2%">
    <button type="submit" class="btn btn-success">Train Model</button>
  </form>
  <div class="row mb-3">
    <div class="col-sm-6" style="margin: auto">
      <div class="card">
        <div class="card-body">
          <h3>Histroy Plot</h3>
          <img
            src="data:image/png;base64, {{ model_history }}"
            alt="Model training history plot"
            style="width: 100%; height: auto"
          />
        </div>
      </div>
    </div>
  </div>
  <hr />
  
  <!-- Display Training Evaluation -->
  
  <div class="col-sm-12">
    <div class="card">
      <div class="card-header">
        <h3>Model Evaluation</h3>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-sm-6">
            <div class="card border-0">
              <div class="card-body">
                <h4>Accuracy</h4>
                <textarea rows="6" style="width: 100%">
                            {% for metric in metrics %}
                            <h1>Evaluation for {{ metric.emotion }}</h1>
                            <p>Accuracy: {{ metric.accuracy }}</p>
                            {% endfor %}
                          </textarea
                >
              </div>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="card border-0">
              <div class="card-body">
                <h4>Precision</h4>
                <textarea rows="6" style="width: 100%">
                            {% for metric in metrics %}
                            <h1>Evaluation for {{ metric.emotion }}</h1>
                            <p>Precision: {{ metric.precision }}</p>
                            {% endfor %}
                          </textarea
                >
              </div>
            </div>
          </div>
        </div>
  
        <div class="row">
          <div class="col-sm-6">
            <div class="card border-0">
              <div class="card-body">
                <h4>Recall</h4>
                <p class="card-text">
                  <textarea rows="6" style="width: 100%">
                            {% for metric in metrics %}
                            <h1>Evaluation for {{ metric.emotion }}</h1>
                            <p>Recall: {{ metric.recall }}</p>
                            {% endfor %}
                          </textarea
                  >
                </p>
              </div>
            </div>
          </div>
  
          <div class="col-sm-6">
            <div class="card border-0">
              <div class="card-body">
                <h4>F1 Score</h4>
                <p class="card-text">
                  <textarea rows="6" style="width: 100%">
                            {% for metric in metrics %}
                              <h1>Evaluation for {{ metric.emotion }}</h1>
                              <p>F1 Score: {{ metric.f1_score }}</p>
                              {% endfor %}
                          </textarea
                  >
                </p>
              </div>
            </div>
          </div>
        </div>
  
        <div class="row">
          <div class="col-sm-6">
            <div class="card border-0">
              <div class="card-body">
                <h4>AUC</h4>
                <p class="card-text">
                  <textarea rows="6" style="width: 100%">
                            {% for metric in metrics %}
                              <h1>Evaluation for {{ metric.emotion }}</h1>
                              <p>AUC: {{ metric.auc }}</p>
                              {% endfor %}
                          </textarea
                  >
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <hr />
  
  <!-- Display Testing Evaluation -->
  
  <div class="col-sm-12">
    <div class="card">
      <div class="card-header">
        <h3>Graphs</h3>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-sm-6">
            <div class="card border-0">
              <div class="card-body">
                <h4>Confusion Matrix for each Emotion</h4>
                {% for metric in metrics %}
                <img
                  src="data:image/png;base64,{{ metric.confusion_matrix_img }}"
                  alt="Confusion Matrix"
                  style="width: 100%; height: auto"
                />
                {% endfor %}
              </div>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="card border-0">
              <div class="card-body">
                <h4 class="mb-2">ROC Curve on all Emotions</h4>
                {% for metric in metrics %} {% if metric.emotion == 'all_emotions'
                %}
                <img
                  src="data:image/png;base64,{{ metric.roc_curve_img }}"
                  alt="Combined ROC Curve"
                  style="width: 100%; height: auto"
                />
                {% endif %} {% endfor %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <div class="row">
      <div class="mt-3 text-center">
        <form action="/apply_new_voice_emotion_model" method="post">
          <button
            type="submit"
            class="btn btn-primary"
            name="button"
            value="applyNewEmotionModel"
          >
            Apply New Model
          </button>
        </form>
      </div>
    </div>
  
    {%endblock%}
  </div>
  